<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Authentasaurus::Authorization</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            Authentasaurus::Authorization 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/authentasaurus/authorization_rb.html">lib/authentasaurus/authorization.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <h1><a href="Authorization.html">Authorization</a> Helpers</h1>
<p>
The authorization module provides helpers for restricting access to your
controllers.
</p>
<p>
Each controller is considered an area in <a
href="../Authentasaurus.html">Authentasaurus</a>, for example
UsersController stands for &#8220;users&#8221; area. Each area must be
defined in the Areas table so <a
href="../Authentasaurus.html">Authentasaurus</a> can control access to it.
</p>
<p>
<a href="../Authentasaurus.html">Authentasaurus</a> provides a simple rake
task to define areas automatically:
</p>
<pre>
 rake authentasaurus:create_areas
</pre>
<h2>Restricting Access</h2>
<p>
You can restrict access to any controller using one of the following class
methods on your controller.
</p>
<p>
At login, <a href="../Authentasaurus.html">Authentasaurus</a> will load the
permissions of the group the user belongs to in the session and will use
them to authorize access to the area.
</p>
<p>
There are three levels of restriction in <a
href="../Authentasaurus.html">Authentasaurus</a>, login, read and write;
with the exception of login, read and write don&#8217;t have any logic
behind them; they are defined using the Permission and are only
symbolically named i.e.: you can use read instead of write and vice versa
it only depends on how you use them.
</p>
<h3>Restricting access to logged in users</h3>
<p>
You can restrict access to an area to logged in users only using the <a
href="Authorization/ActionController/ClassMethods.html#M000011">ActionController::ClassMethods#require_login</a>
class method.
</p>
<p>
Consider the following example restricting access to the pages controller
to only logged in users:
</p>
<pre>
  class PagesController &lt; ActionController::Base
    require_login
    ...
  end
</pre>
<p>
You can also specify which actions to restrict:
</p>
<pre>
  require_login :new, :create, :index
</pre>
<p>
<a href="../Authentasaurus.html">Authentasaurus</a> will automatically
redirect users to the sign-in page if they try accessing the area while
they are not logged in. Once the user logs in he/she is redirected back to
his/her original destination unless you explicitly skip that behaviour:
</p>
<pre>
  require_login :skip_request =&gt; true
</pre>
<h3>Restricting access according to permissions</h3>
<p>
Unlike the login restriction, permissions restrictions checks if the user
is logged in and has the permission to access the area.
</p>
<p>
Users get permissions from their parent group and permissions are
dynamically set in the database.
</p>
<p>
<a href="../Authentasaurus.html">Authentasaurus</a> currently supports only
two permissions, read and write, both permissions are symbolically named,
they have no meaning.
</p>
<h4>Restricting access to users with read permission</h4>
<pre>
  class PagesController &lt; ActionController::Base
    require_read
    ...
  end
</pre>
<p>
<a
href="Authorization/ActionController/ClassMethods.html#M000013">ActionController::ClassMethods#require_read</a>
takes the same options as <a
href="Authorization/ActionController/ClassMethods.html#M000011">ActionController::ClassMethods#require_login</a>
and <a
href="Authorization/ActionController/ClassMethods.html#M000012">ActionController::ClassMethods#require_write</a>
</p>
<h4>Restricting access to users with write permission</h4>
<pre>
  class PagesController &lt; ActionController::Base
    require_write
    ...
  end
</pre>
<p>
<a
href="Authorization/ActionController/ClassMethods.html#M000012">ActionController::ClassMethods#require_write</a>
takes the same options as <a
href="Authorization/ActionController/ClassMethods.html#M000011">ActionController::ClassMethods#require_login</a>
and <a
href="Authorization/ActionController/ClassMethods.html#M000013">ActionController::ClassMethods#require_read</a>
</p>
<h2>Checking if the user is logged in in actions or views</h2>
<p>
Along with the class helpers, <a
href="../Authentasaurus.html">Authentasaurus</a> includes a helper to check
if the user is logged in inside any of your actions:
</p>
<pre>
  is_logged_in?
</pre>
<p>
Check <a
href="Authorization/CommonInstanceMethods.html#M000009">ActionController::CommonInstanceMethods#is_logged_in?</a>
for more information.
</p>
<h2>Checking permissions in actions or views</h2>
<p>
You can also check if the logged in user has a certain permission.
</p>
<p>
Consider the following example to check if the logged in user has read
permission on the current area
</p>
<pre>
  has?(:read)
</pre>
<p>
You can also check permissions on an area while in another, for example to
check if the current user has write permission on the users area:
</p>
<pre>
  has?(:write,:users)
</pre>
<p>
Check <a
href="Authorization/CommonInstanceMethods.html#M000006">ActionController::CommonInstanceMethods#has?</a>
for more information.
</p>
<h2>Retrieving the current user in actions or views</h2>
<p>
To get the logged in user you can use the following helper:
</p>
<pre>
  current_user
</pre>
<p>
Check <a
href="Authorization/CommonInstanceMethods.html#M000005">ActionController::CommonInstanceMethods#current_user</a>
for more information.
</p>

    </div>
    

    

    
    

    
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="Authorization/ActionController.html">Authentasaurus::Authorization::ActionController</a></li>
        
        <li><span class="type">MODULE</span> <a href="Authorization/ActionView.html">Authentasaurus::Authorization::ActionView</a></li>
        
        <li><span class="type">MODULE</span> <a href="Authorization/CommonInstanceMethods.html">Authentasaurus::Authorization::CommonInstanceMethods</a></li>
        
    </ul>
    

    

    

    
</div>
    </div>
  </body>
</html>    